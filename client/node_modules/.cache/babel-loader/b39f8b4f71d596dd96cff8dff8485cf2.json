{"ast":null,"code":"var _jsxFileName = \"/Volumes/BlackSSD/WorkSpace/hausboot/client/src/components/form/paypal.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Paypal = ({\n  product,\n  bookingState\n}) => {\n  _s();\n\n  const [paidFor, setPaidFor] = useState(false);\n  const [error, setError] = useState(null);\n  const paypalRef = useRef();\n  const history = useHistory(); // const googleForm = process.env.REACT_APP_GOOGLE_FORM_ID;\n  // const config = {\n  // \tcors: 'https://cors-anywhere.herokuapp.com/', // <optional> doesn't display the cors error\n  // \tformUrl: `https://docs.google.com/forms/u/0/d/e/${googleForm}/formResponse`,\n  // };\n  // const inputs = [\n  // \t//name\n  // \t{ id: 2092238618, value: bookingState.name },\n  // \t//email\n  // \t{ id: 1488469460, value: bookingState.email },\n  // \t//phone\n  // \t{ id: 1950867635, value: bookingState.phone },\n  // \t//person\n  // \t{ id: 816843087, value: `Anzahl Personen: ${bookingState.person}` },\n  // \t//child\n  // \t{\n  // \t\tid: 1313324539,\n  // \t\tvalue:\n  // \t\t\tbookingState.child === '0'\n  // \t\t\t\t? ''\n  // \t\t\t\t: bookingState.child > 1\n  // \t\t\t\t? `${bookingState.child} Kinder`\n  // \t\t\t\t: `${bookingState.child} Kind`,\n  // \t},\n  // \t//dog\n  // \t{\n  // \t\tid: 1525844151,\n  // \t\tvalue:\n  // \t\t\tbookingState.dog === '0'\n  // \t\t\t\t? ''\n  // \t\t\t\t: bookingState.dog > 1\n  // \t\t\t\t? `${bookingState.dog} Hunde`\n  // \t\t\t\t: `${bookingState.dog} Hund`,\n  // \t},\n  // \t//startTime\n  // \t{ id: '1195734802_hour', value: '10' },\n  // \t{ id: '1195734802_minute', value: '00' },\n  // \t//endTime\n  // \t{ id: '649634804_hour', value: '17' },\n  // \t{ id: '649634804_minute', value: '00' },\n  // \t//location\n  // \t{ id: 1011833342, value: 'Oranienburg' },\n  // \t//arrivalDate\n  // \t{ id: '1981922390_day', value: bookingState.arrivalDate.getDate() },\n  // \t{ id: '1981922390_month', value: bookingState.arrivalDate.getMonth() + 1 },\n  // \t{ id: '1981922390_year', value: bookingState.arrivalDate.getFullYear() },\n  // \t//departureDate\n  // \t{ id: '1424445665_day', value: bookingState.departureDate.getDate() },\n  // \t{\n  // \t\tid: '1424445665_month',\n  // \t\tvalue: bookingState.departureDate.getMonth() + 1,\n  // \t},\n  // \t{ id: '1424445665_year', value: bookingState.departureDate.getFullYear() },\n  // \t//hausboot\n  // \t{ id: 269115742, value: 'Rot' },\n  // ];\n\n  const handleServer = useCallback(() => {\n    axios.post('/api/event', {\n      data: bookingState\n    }).then(function (response) {\n      console.log(response);\n    }).catch(function (error) {\n      console.log(error);\n    });\n    history.push('/landing', {\n      details: bookingState\n    });\n  }, [history, bookingState]);\n  useEffect(() => {\n    window.paypal.Buttons({\n      createOrder: (data, actions) => {\n        return actions.order.create({\n          purchase_units: [{\n            description: product.name,\n            amount: {\n              currency_code: 'EUR',\n              value: product.price\n            }\n          }]\n        });\n      },\n      onApprove: async (data, actions) => {\n        const order = await actions.order.capture();\n        setPaidFor(true); // doSubmit();\n\n        handleServer(); // history.push('/booking');\n\n        console.log(order);\n\n        if (data.orderID) {\n          console.log('%c Order Successfully made!', 'color: yellow');\n        }\n      },\n      onError: err => {\n        setError(err);\n        console.error(err);\n      }\n    }).render(paypalRef.current);\n  }, [product.price, product.name, handleServer]); // const doSubmit = async () => {\n  // \tconst formData = new FormData();\n  // \tinputs.map((item) => {\n  // \t\treturn formData.append(`entry.${item.id}`, item.value);\n  // \t});\n  // \tawait axios({\n  // \t\t// url: `${config.cors}${config.formUrl}`,\n  // \t\turl: `${config.formUrl}`,\n  // \t\tmethod: 'POST',\n  // \t\tdata: formData,\n  // \t\tresponseType: 'json',\n  // \t})\n  // \t\t.then((res) => {\n  // \t\t\tconsole.log('response', res);\n  // \t\t})\n  // \t\t.catch((err) => {\n  // \t\t\tconsole.log('err', err);\n  // \t\t});\n  // };\n\n  if (paidFor) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Successfully Paid\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 10\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        paddingBottom: '10px'\n      },\n      children: \"Jetzt bezahlen um die Buchung zu best\\xE4tigen:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 4\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Uh oh, an error occurred! \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: paypalRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Paypal, \"Xz9BhQjEfgj0fZUrMN91YPG0sJw=\", false, function () {\n  return [useHistory];\n});\n\n_c = Paypal;\nexport default Paypal;\n\nvar _c;\n\n$RefreshReg$(_c, \"Paypal\");","map":{"version":3,"sources":["/Volumes/BlackSSD/WorkSpace/hausboot/client/src/components/form/paypal.js"],"names":["React","useState","useRef","useEffect","useCallback","axios","useHistory","Paypal","product","bookingState","paidFor","setPaidFor","error","setError","paypalRef","history","handleServer","post","data","then","response","console","log","catch","push","details","window","paypal","Buttons","createOrder","actions","order","create","purchase_units","description","name","amount","currency_code","value","price","onApprove","capture","orderID","onError","err","render","current","paddingBottom","message"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\n\nconst Paypal = ({ product, bookingState }) => {\n\tconst [paidFor, setPaidFor] = useState(false);\n\tconst [error, setError] = useState(null);\n\tconst paypalRef = useRef();\n\tconst history = useHistory();\n\n\t// const googleForm = process.env.REACT_APP_GOOGLE_FORM_ID;\n\t// const config = {\n\t// \tcors: 'https://cors-anywhere.herokuapp.com/', // <optional> doesn't display the cors error\n\t// \tformUrl: `https://docs.google.com/forms/u/0/d/e/${googleForm}/formResponse`,\n\t// };\n\n\t// const inputs = [\n\t// \t//name\n\t// \t{ id: 2092238618, value: bookingState.name },\n\t// \t//email\n\t// \t{ id: 1488469460, value: bookingState.email },\n\t// \t//phone\n\t// \t{ id: 1950867635, value: bookingState.phone },\n\t// \t//person\n\t// \t{ id: 816843087, value: `Anzahl Personen: ${bookingState.person}` },\n\t// \t//child\n\t// \t{\n\t// \t\tid: 1313324539,\n\t// \t\tvalue:\n\t// \t\t\tbookingState.child === '0'\n\t// \t\t\t\t? ''\n\t// \t\t\t\t: bookingState.child > 1\n\t// \t\t\t\t? `${bookingState.child} Kinder`\n\t// \t\t\t\t: `${bookingState.child} Kind`,\n\t// \t},\n\t// \t//dog\n\t// \t{\n\t// \t\tid: 1525844151,\n\t// \t\tvalue:\n\t// \t\t\tbookingState.dog === '0'\n\t// \t\t\t\t? ''\n\t// \t\t\t\t: bookingState.dog > 1\n\t// \t\t\t\t? `${bookingState.dog} Hunde`\n\t// \t\t\t\t: `${bookingState.dog} Hund`,\n\t// \t},\n\t// \t//startTime\n\t// \t{ id: '1195734802_hour', value: '10' },\n\t// \t{ id: '1195734802_minute', value: '00' },\n\t// \t//endTime\n\t// \t{ id: '649634804_hour', value: '17' },\n\t// \t{ id: '649634804_minute', value: '00' },\n\t// \t//location\n\t// \t{ id: 1011833342, value: 'Oranienburg' },\n\t// \t//arrivalDate\n\t// \t{ id: '1981922390_day', value: bookingState.arrivalDate.getDate() },\n\t// \t{ id: '1981922390_month', value: bookingState.arrivalDate.getMonth() + 1 },\n\t// \t{ id: '1981922390_year', value: bookingState.arrivalDate.getFullYear() },\n\t// \t//departureDate\n\t// \t{ id: '1424445665_day', value: bookingState.departureDate.getDate() },\n\t// \t{\n\t// \t\tid: '1424445665_month',\n\t// \t\tvalue: bookingState.departureDate.getMonth() + 1,\n\t// \t},\n\t// \t{ id: '1424445665_year', value: bookingState.departureDate.getFullYear() },\n\t// \t//hausboot\n\t// \t{ id: 269115742, value: 'Rot' },\n\t// ];\n\tconst handleServer = useCallback(() => {\n\t\taxios\n\t\t\t.post('/api/event', {\n\t\t\t\tdata: bookingState,\n\t\t\t})\n\t\t\t.then(function (response) {\n\t\t\t\tconsole.log(response);\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\thistory.push('/landing', { details: bookingState });\n\t}, [history, bookingState]);\n\n\tuseEffect(() => {\n\t\twindow.paypal\n\t\t\t.Buttons({\n\t\t\t\tcreateOrder: (data, actions) => {\n\t\t\t\t\treturn actions.order.create({\n\t\t\t\t\t\tpurchase_units: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdescription: product.name,\n\t\t\t\t\t\t\t\tamount: {\n\t\t\t\t\t\t\t\t\tcurrency_code: 'EUR',\n\t\t\t\t\t\t\t\t\tvalue: product.price,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonApprove: async (data, actions) => {\n\t\t\t\t\tconst order = await actions.order.capture();\n\t\t\t\t\tsetPaidFor(true);\n\t\t\t\t\t// doSubmit();\n\t\t\t\t\thandleServer();\n\t\t\t\t\t// history.push('/booking');\n\t\t\t\t\tconsole.log(order);\n\n\t\t\t\t\tif (data.orderID) {\n\t\t\t\t\t\tconsole.log('%c Order Successfully made!', 'color: yellow');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonError: (err) => {\n\t\t\t\t\tsetError(err);\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t},\n\t\t\t})\n\t\t\t.render(paypalRef.current);\n\t}, [product.price, product.name, handleServer]);\n\n\t// const doSubmit = async () => {\n\t// \tconst formData = new FormData();\n\n\t// \tinputs.map((item) => {\n\t// \t\treturn formData.append(`entry.${item.id}`, item.value);\n\t// \t});\n\n\t// \tawait axios({\n\t// \t\t// url: `${config.cors}${config.formUrl}`,\n\t// \t\turl: `${config.formUrl}`,\n\t// \t\tmethod: 'POST',\n\t// \t\tdata: formData,\n\t// \t\tresponseType: 'json',\n\t// \t})\n\t// \t\t.then((res) => {\n\t// \t\t\tconsole.log('response', res);\n\t// \t\t})\n\t// \t\t.catch((err) => {\n\t// \t\t\tconsole.log('err', err);\n\t// \t\t});\n\t// };\n\n\tif (paidFor) {\n\t\treturn <div>Successfully Paid</div>;\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<h2 style={{ paddingBottom: '10px' }}>Jetzt bezahlen um die Buchung zu bestätigen:</h2>\n\t\t\t{error && <div>Uh oh, an error occurred! {error.message}</div>}\n\t\t\t<div ref={paypalRef} />\n\t\t</div>\n\t);\n};\n\nexport default Paypal;\n"]},"metadata":{},"sourceType":"module"}